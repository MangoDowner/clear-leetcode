# 8. 字符串转换整数 (atoi)
> 原题链接：[8. 字符串转换整数 (atoi)](https://leetcode-cn.com/problems/string-to-integer-atoi/)

### 解题思路
* 1、根据示例 1，需要去掉前导空格；
```
输入: "42"
输出: 42
```
* 2、根据示例 2，需要判断第 1 个字符为 + 和 - 的情况，
因此，可以设计一个变量 sign，初始化的时候为 1，如果遇到 - ，将 sign 修正为 -1；
``` 
输入: "   -42"
输出: -42
解释: 第一个非空白字符为 '-', 它是一个负号。
     我们尽可能将负号与后面所有连续出现的数字组合起来，最后得到 -42 。
```
* 3、判断是否是数字，可以使用字符的 ASCII 码数值进行比较，即 0 <= c <= '9'；
* 4、根据示例 3 和示例 4 ，在遇到第 1 个不是数字的字符的情况下，转换停止，退出循环；
```
输入: "4193 with words"
输出: 4193
解释: 转换截止于数字 '3' ，因为它的下一个字符不为数字。

输入: "words and 987"
输出: 0
解释: 第一个非空字符是 'w', 但它不是数字或正、负号。
     因此无法执行有效的转换。
```
* 5、根据示例 5，如果转换以后的数字超过了 int 类型的范围，需要截取。这里不能将结果 res 变量设计为 long 类型，注意：由于输入的字符串转换以后也有可能超过 long 类型，因此需要在循环内部就判断是否越界，只要越界就退出循环，这样也可以减少不必要的计算；
由于涉及下标访问，因此全程需要考虑数组下标是否越界的情况。
```
输入: "-91283472332"
输出: -2147483648
解释: 数字 "-91283472332" 超过 32 位有符号整数范围。 
     因此返回 INT_MIN (−231) 。
```

### 代码
```golang
func myAtoi(str string) int {
	str = strings.TrimSpace(str)
	// 最终结果，符号
	result, sign := 0, 1
	for k, v := range str {
		if unicode.IsDigit(v) {
			result = result*10 + int(v-'0')
		} else if v == '-' && k == 0 {
			sign = -1
		} else if v == '+' && k == 0 {
			sign = 1
		} else { // 碰到其他字符，可以直接跳出
			break
		}
		// 数值越界检测
		if result > math.MaxInt32 {
			if sign == -1 {
				return math.MinInt32
			}
			return math.MaxInt32
		}
	}
	return sign * result
}
```