# 为啥结果就是开平方
### 解题思路
对于``灯10``来说，其会在``1/2/5/10``轮被操作，也就是``开/关/开/关``，最终处于``关闭``状态。

对于``灯16``来说，其会在``1/2/4/8/16``轮被操作，也就是``开/关/开/关/开``，最终处于``打开``状态

很容易得到这样的结论，一个灯:
* 1）如果被操作``偶数``次，最终就会处于``关闭``状态
* 2）如果被操作``奇数``次，最终就会处于``打开``状态

那么，哪一轮，灯会被操作呢？就是``灯的索引`` 被 ``轮次``整除时候，就要被操作。

我们要知道的就是，哪些灯会被打开``奇数次``，按照这个思路写出下面的代码。

```
func bulbSwitch(n int) int {
	result := 0
	for i := 1; i <= n; i++ {
		num := 0
		for j := 1; j <= i; j++ {
			if i % j == 0 {
				num++
			}
		}
		if num % 2 != 0 {
			result++
		}
	}
	return result
}
```
双重循环，结果就是``超时``了。
#### 求奇数次的灯更好办法
有没有更好的办法，求那些会被打开``奇数次``的灯呢？
```
可以被完全开方的数，就是被打开``奇数次``的。
```
因为一个因数如果能整除另一个数，那么得出的的``商``肯定也是因数。

比如2整除16，得到的8，也可以整除16。这样的因数都是成对出现的。

但是4不行，因为4整除16还是得到4，因数的总数目一下子变成奇数了。

最后，问题就转换为求``n``里面有多少完全平方数了。

### 代码

```golang
func bulbSwitch(n int) int {
	return int(math.Sqrt(float64(n)))
}
```